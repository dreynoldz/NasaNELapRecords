{% extends "_baseDashboard.html" %}
{% block content %}
{% set per_page = settings.PER_PAGE | int %}
{% set page = pagination.page | int %}
{% set first = (per_page * page) - (per_page - 1) %}
{% set last = (per_page * page)%}
  <p><a href="{{ url_for('admin.create', model_name=model_name) }}" class="btn btn-md btn-success">Create {{ modelName }}</a></p>
  <h2 class="sub-header">Current {{ model_name }}</h2>
  {% if columns != 'No Data' %}
    <div class="table-responsive">
      <table class="table table-striped">
          <thead>
            <tr>
              {% for col in columns %}
                {% if 'id' == col %}
                  <th>#</th>
                {% else %}
                  <th>{{ col }}</th>
                {% endif %}
              {% endfor %}
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
          {% for row in pagination.items %}
            <tr>
                {% for col in columns %}
                  {% if '_date' in col %}
                    {% if row[col] %}
                      <td>{{ row[col]|datetime_filter }}</td>
                    {% else %}
                      <td></td>
                    {% endif %}
                  {% elif 'password' in col %}
                  {% elif 'laps' == col %}
                  {% else %}
                    <td>{{ row[col] }}</td>
                  {% endif %}
                {% endfor %}
              <td>
                <a href="{{ url_for('admin.update', model_name=model_name, model_id = row.id) }}" class="btn btn-xs btn-info"><span class="glyphicon glyphicon-edit"></span></a>
                <a href="{{ url_for('admin.delete', model_name=model_name, model_id = row.id) }}" class="btn btn-xs btn-danger"><span class="glyphicon glyphicon-remove"></span></a>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
    </div>
    <div class=pagination>
      {%- for page in pagination.iter_pages() %}
        {% if page %}
          {% if page != pagination.page %}
            <a href="{{ url_for('admin.main', model_name=model_name, page=page) }}">{{ page }}</a>
          {% else %}
            <strong>{{ page }}</strong>
          {% endif %}
        {% else %}
          <span class=ellipsis>â€¦</span>
        {% endif %}
      {%- endfor %}
    </div class=pagination>
    <div>Total {{ pagination.total }} Records, displaying {{ first }} - {{ last }}</div>
    {% else %}
    <div class="table-responsive">
      No Data
    </div>
    {% endif %}

{% endblock %}
